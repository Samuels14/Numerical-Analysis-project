<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora Num√©rica - JavaScript</title>
  <link rel="stylesheet" href="css/styles.css">
  
  <!-- Math.js - La √∫nica librer√≠a necesaria para todos los c√°lculos -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
  
  <!-- Desmos API para graficaci√≥n -->
  <script src="https://www.desmos.com/api/v1.9/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
</head>
<body>
  <div class="container">
    <header>
      <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='44' height='44'><rect width='44' height='44' rx='8' fill='%2306b6d4'/><text x='50%' y='54%' font-size='20' font-family='Arial' font-weight='700' text-anchor='middle' fill='white'>Œ£</text></svg>" alt="logo"/>
      <div>
        <h1>Calculadora Num√©rica JavaScript</h1>
        <div class="small">Versi√≥n JavaScript pura - Todos los c√°lculos se ejecutan en tu navegador sin necesidad de servidor.</div>
        <div class="small" style="margin-top:8px; color: #06b6d4;">
          <strong>Funciones disponibles:</strong> sin(x), cos(x), tan(x), log(x) o ln(x) [log natural], sqrt(x), exp(x), abs(x), asin(x), acos(x), atan(x), sinh(x), cosh(x), tanh(x), x^n, y m√°s!
        </div>
      </div>
    </header>

    <div class="grid">
      <div class="card">
        <form id="calculatorForm" novalidate>

          <!-- Tabs Navigation -->
          <div class="tabs-container">
            <button type="button" class="tab-button active" onclick="switchTab(event, 'equations')">
              <span class="emoji">üîç</span>
              <span>Ecuaciones</span>
            </button>
            <button type="button" class="tab-button" onclick="switchTab(event, 'linear')">
              <span class="emoji">üìê</span>
              <span>Sistemas Lineales</span>
            </button>
            <button type="button" class="tab-button" onclick="switchTab(event, 'interpolation')">
              <span class="emoji">üìà</span>
              <span>Interpolaci√≥n</span>
            </button>
            <button type="button" class="tab-button" onclick="switchTab(event, 'additional')">
              <span class="emoji">‚ûï</span>
              <span>M√©todos Adicionales</span>
            </button>
          </div>

          <!-- Tab Content: Equation Solving -->
          <div id="equations" class="tab-content active">
            <div class="subsection-title">
              <span class="emoji">üìå</span>
              <span>M√©todos de Intervalo</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="incremental_search">
                <span>B√∫squeda Incremental</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="bisection" checked>
                <span>Bisecci√≥n</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="false_position">
                <span>Regla Falsa</span>
              </label>
            </div>

            <div class="subsection-title">
              <span class="emoji">üìå</span>
              <span>M√©todos Abiertos</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="fixed_point">
                <span>Punto Fijo</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="newton">
                <span>Newton-Raphson</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="secant">
                <span>Secante</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="newton_multiple">
                <span>Newton Ra√≠ces M√∫ltiples</span>
              </label>
            </div>
          </div>

          <!-- Tab Content: Linear Systems -->
          <div id="linear" class="tab-content">
            <div class="subsection-title">
              <span class="emoji">üî∏</span>
              <span>Eliminaci√≥n Gaussiana</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="gauss">
                <span>Gauss Simple</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="partial_pivot">
                <span>Pivoteo Parcial</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="total_pivot">
                <span>Pivoteo Total</span>
              </label>
            </div>

            <div class="subsection-title">
              <span class="emoji">üî∏</span>
              <span>Factorizaci√≥n</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="lu_simple">
                <span>LU Simple</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="lu_partial">
                <span>LU Pivoteo Parcial</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="crout">
                <span>Crout</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="doolittle">
                <span>Doolittle</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="cholesky">
                <span>Cholesky</span>
              </label>
            </div>

            <div class="subsection-title">
              <span class="emoji">üìå</span>
              <span>M√©todos Iterativos</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="jacobi">
                <span>Jacobi</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="gauss_seidel">
                <span>Gauss-Seidel</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="sor">
                <span>SOR</span>
              </label>
            </div>
          </div>

          <!-- Tab Content: Interpolation -->
          <div id="interpolation" class="tab-content">
            <div class="subsection-title">
              <span class="emoji">üìå</span>
              <span>Interpolaci√≥n Polinomial</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="vandermonde">
                <span>Vandermonde</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="divided_differences">
                <span>Diferencias Divididas</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="lagrange">
                <span>Lagrange</span>
              </label>
            </div>

            <div class="subsection-title">
              <span class="emoji">üìä</span>
              <span>Splines</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="linear_spline">
                <span>Spline Lineal</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="quadratic_spline">
                <span>Spline Cuadr√°tico</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="cubic_spline">
                <span>Spline C√∫bico</span>
              </label>
            </div>
          </div>

          <!-- Tab Content: Additional Methods -->
          <div id="additional" class="tab-content">
            <div class="subsection-title">
              <span class="emoji">üîß</span>
              <span>M√©todos de Sustituci√≥n</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="forward_substitution">
                <span>Sustituci√≥n Progresiva</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="backward_substitution">
                <span>Sustituci√≥n Regresiva</span>
              </label>
            </div>
          </div>

          <!-- Dynamic Parameters Section -->
          <div style="margin-top:16px">
            <h4 style="margin:0 0 12px 0; color:var(--text); font-size:14px;">Par√°metros</h4>
            <div id="dynamic-params"></div>
          </div>

          <button type="submit" class="run-btn">Calcular</button>
        </form>
      </div>

      <div class="card">
        <!-- Desmos Graph Container -->
        <div id="graph-section" style="margin-bottom: 20px; display: none;">
          <h3>Gr√°fica</h3>
          <div id="calculator" style="width: 100%; height: 400px; border: 1px solid #e5e7eb; border-radius: 8px;"></div>
        </div>

        <h3>Salida</h3>
        <div class="output">
          Los resultados aparecer√°n aqu√≠...
        </div>

        <footer>
          <strong>Sistemas lineales:</strong> Ingresa A por filas (espacios) y b en una l√≠nea separada. Por ejemplo, para 2x+3y=5 y x-y=1 escribe en A: <code>2 3</code> y <code>1 -1</code> y en b: <code>5 1</code>.
          <br><br>
          <strong>Ejemplos de funciones:</strong>
          <br>‚Ä¢ <code>sin(x) - x/3</code> (trigonom√©trica)
          <br>‚Ä¢ <code>log(x) - 2</code> o <code>ln(x) - 2</code> (logaritmo natural)
          <br>‚Ä¢ <code>ln(sin(x)^2+1)-(1/2)</code> (combinada)
          <br>‚Ä¢ <code>exp(x) - 5</code> (exponencial)
          <br>‚Ä¢ <code>sqrt(x) - 3</code> (ra√≠z cuadrada)
          <br>‚Ä¢ <code>x^2 * cos(x) - 1</code> (funciones combinadas)
        </footer>
      </div>
    </div>
  </div>

  <!-- Scripts de la aplicaci√≥n -->
  <script src="js/utils.js"></script>
  <script src="js/methods/roots.js"></script>
  <script src="js/methods/linear.js"></script>
  <script src="js/methods/interpolation.js"></script>
  <script src="js/formatter.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
