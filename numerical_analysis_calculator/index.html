<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Numerical Calculator - JavaScript</title>
  <link rel="stylesheet" href="css/styles.css">
  
  <!-- Math.js - The only library needed for all calculations -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>

  <!-- Desmos API for graphing -->
  <script src="https://www.desmos.com/api/v1.9/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
</head>
<body>
  <div class="container">
    <header>
      <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='44' height='44'><rect width='44' height='44' rx='8' fill='%2306b6d4'/><text x='50%' y='54%' font-size='20' font-family='Arial' font-weight='700' text-anchor='middle' fill='white'>Œ£</text></svg>" alt="logo"/>
      <div>
        <h1>JavaScript Numerical Calculator</h1>
        <div class="small">Pure JavaScript version - All calculations run in your browser without needing a server.</div>
        <div class="small" style="margin-top:8px; color: #06b6d4;">
          <strong>Available functions:</strong> sin(x), cos(x), tan(x), log(x) or ln(x) [natural log], sqrt(x), exp(x), abs(x), asin(x), acos(x), atan(x), sinh(x), cosh(x), tanh(x), x^n, and more!
        </div>
      </div>
    </header>

    <div class="grid">
      <div class="card">
        <form id="calculatorForm" novalidate>

          <!-- Tabs Navigation -->
          <div class="tabs-container">
            <button type="button" class="tab-button active" onclick="switchTab(event, 'equations')">
              <span class="emoji">üîç</span>
              <span>Equations</span>
            </button>
            <button type="button" class="tab-button" onclick="switchTab(event, 'linear')">
              <span class="emoji">üìê</span>
              <span>Linear Systems</span>
            </button>
            <button type="button" class="tab-button" onclick="switchTab(event, 'interpolation')">
              <span class="emoji">üìà</span>
              <span>Interpolation</span>
            </button>
            <button type="button" class="tab-button" onclick="switchTab(event, 'additional')">
              <span class="emoji">‚ûï</span>
              <span>Additional Methods</span>
            </button>
          </div>

          <!-- Tab Content: Equation Solving -->
          <div id="equations" class="tab-content active">
            <div class="subsection-title">
              <span class="emoji">üìå</span>
              <span>Interval Methods</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="incremental_search">
                <span>Incremental Search</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="bisection" checked>
                <span>Bisection</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="false_position">
                <span>False Position</span>
              </label>
            </div>

            <div class="subsection-title">
              <span class="emoji">üìå</span>
              <span>Open Methods</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="fixed_point">
                <span>Fixed Point</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="newton">
                <span>Newton-Raphson</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="secant">
                <span>Secant</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="newton_multiple">
                <span>Newton Multiple Roots</span>
              </label>
            </div>
          </div>

          <!-- Tab Content: Linear Systems -->
          <div id="linear" class="tab-content">
            <div class="subsection-title">
              <span class="emoji">üî∏</span>
              <span>Gaussian Elimination</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="gauss">
                <span>Simple Gauss</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="partial_pivot">
                <span>Partial Pivoting</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="total_pivot">
                <span>Total Pivoting</span>
              </label>
            </div>

            <div class="subsection-title">
              <span class="emoji">üî∏</span>
              <span>Factorization</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="lu_simple">
                <span>Simple LU</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="lu_partial">
                <span>LU Partial Pivoting</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="crout">
                <span>Crout</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="doolittle">
                <span>Doolittle</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="cholesky">
                <span>Cholesky</span>
              </label>
            </div>

            <div class="subsection-title">
              <span class="emoji">üìå</span>
              <span>Iterative Methods</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="jacobi">
                <span>Jacobi</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="gauss_seidel">
                <span>Gauss-Seidel</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="sor">
                <span>SOR</span>
              </label>
            </div>
          </div>

          <!-- Tab Content: Interpolation -->
          <div id="interpolation" class="tab-content">
            <div class="subsection-title">
              <span class="emoji">üìå</span>
              <span>Polynomial Interpolation</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="vandermonde">
                <span>Vandermonde</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="divided_differences">
                <span>Divided Differences</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="lagrange">
                <span>Lagrange</span>
              </label>
            </div>

            <div class="subsection-title">
              <span class="emoji">üìä</span>
              <span>Splines</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="linear_spline">
                <span>Linear Spline</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="quadratic_spline">
                <span>Quadratic Spline</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="cubic_spline">
                <span>Cubic Spline</span>
              </label>
            </div>
          </div>

          <!-- Tab Content: Additional Methods -->
          <div id="additional" class="tab-content">
            <div class="subsection-title">
              <span class="emoji">üîß</span>
              <span>Substitution Methods</span>
            </div>
            <div class="methods-grid">
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="forward_substitution">
                <span>Forward Substitution</span>
              </label>
              <label class="method-card" onclick="selectMethod(this)">
                <input type="radio" name="method" value="backward_substitution">
                <span>Backward Substitution</span>
              </label>
            </div>
          </div>

          <!-- Dynamic Parameters Section -->
          <div style="margin-top:16px">
            <h4 style="margin:0 0 12px 0; color:var(--text); font-size:14px;">Parameters</h4>
            <div id="dynamic-params"></div>
          </div>

          <button type="submit" class="run-btn">Calculate</button>
        </form>
      </div>

      <div class="card">
        <!-- Desmos Graph Container -->
        <div id="graph-section" style="margin-bottom: 20px; display: none;">
          <h3>Graph</h3>
          <div id="calculator" style="width: 100%; height: 400px; border: 1px solid #e5e7eb; border-radius: 8px;"></div>
        </div>

        <h3>Output</h3>
        <div class="output">
          Results will appear here...
        </div>

        <footer>
          <strong>Linear systems:</strong> Enter A by rows (spaces) and b in a separate line. For example, for 2x+3y=5 and x-y=1 write in A: <code>2 3</code> and <code>1 -1</code> and in b: <code>5 1</code>.
          <br><br>
          <strong>Function examples:</strong>
          <br>‚Ä¢ <code>sin(x) - x/3</code> (trigonometric)
          <br>‚Ä¢ <code>log(x) - 2</code> or <code>ln(x) - 2</code> (natural logarithm)
          <br>‚Ä¢ <code>ln(sin(x)^2+1)-(1/2)</code> (combined)
          <br>‚Ä¢ <code>exp(x) - 5</code> (exponential)
          <br>‚Ä¢ <code>sqrt(x) - 3</code> (square root)
          <br>‚Ä¢ <code>x^2 * cos(x) - 1</code> (combined functions)
        </footer>
      </div>
    </div>
  </div>

  <!-- Application scripts -->
  <script src="js/utils.js"></script>
  <script src="js/methods/roots.js"></script>
  <script src="js/methods/linear.js"></script>
  <script src="js/methods/interpolation.js"></script>
  <script src="js/formatter.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
